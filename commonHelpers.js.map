{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCard = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return `\n    <li class=\"gallery-card\">\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <div class=\"gallery-card-info\">\n        <p><strong>Likes:</strong> ${likes}</p>\n        <p><strong>Views:</strong> ${views}</p>\n        <p><strong>Comments:</strong> ${comments}</p>\n        <p><strong>Downloads:</strong> ${downloads}</p>\n      </div>\n    </li>\n  `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst API_KEY = '45206058-c611c9adec5d897ba1c6c02b0';\n\nexport const searchPhotos = async (query, page) => {\n  const axiosConfigs = {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  };\n\n  try {\n    const response = await axios.get('', axiosConfigs);\n\n    if (response && response.data && response.data.hits) {\n      return response.data;\n    } else {\n      throw new Error('Unexpected response structure');\n    }\n  } catch (error) {\n    console.error('Something went wrong:', error.message || error);\n    throw error;\n  }\n};\n","// Refactoring\n\nimport { createGalleryCard } from './js/render-functions';\nimport { searchPhotos } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nconst searchFormElement = document.querySelector('.js-search-form');\nconst galleryElements = document.querySelector('.js-gallery');\nconst loaderElement = document.querySelector('.js-loader');\nconst loadMoreBtn = document.querySelector('.js-load-more-btn');\nlet lightbox;\nlet searchValue = '';\nlet page = 1;\n\nconst onSearchSubmit = async event => {\n  event.preventDefault();\n\n  searchValue = event.target.elements.user_query.value.trim();\n  event.target.elements.user_query.value = '';\n  page = 1;\n\n  if (searchValue === '') {\n    iziToast.error({\n      message: 'Please fill in this place',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  galleryElements.innerHTML = '';\n  loadMoreBtn.classList.add('is-hidden');\n  loaderElement.classList.remove('is-hidden');\n\n  try {\n    const { hits, totalHits } = await searchPhotos(searchValue, page);\n\n    loaderElement.classList.add('is-hidden');\n\n    if (hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    const galleryCards = hits.map(createGalleryCard).join('');\n    galleryElements.innerHTML = galleryCards;\n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery-link', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } else {\n      lightbox.refresh();\n    }\n\n    if (totalHits > hits.length) {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n      position: 'topRight',\n    });\n    loaderElement.classList.add('is-hidden');\n  }\n};\n\nconst onLoadMoreClick = async () => {\n  page += 1;\n  loaderElement.classList.remove('is-hidden');\n\n  try {\n    const { hits, totalHits } = await searchPhotos(searchValue, page);\n\n    loaderElement.classList.add('is-hidden');\n\n    const galleryCards = hits.map(createGalleryCard).join('');\n    galleryElements.insertAdjacentHTML('beforeend', galleryCards);\n\n    lightbox.refresh();\n\n    if (galleryElements.children.length >= totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery-card')\n      .getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n      position: 'topRight',\n    });\n    loaderElement.classList.add('is-hidden');\n  }\n};\n\nsearchFormElement.addEventListener('submit', onSearchSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n"],"names":["createGalleryCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","axios","API_KEY","searchPhotos","query","page","axiosConfigs","response","error","searchFormElement","galleryElements","loaderElement","loadMoreBtn","lightbox","searchValue","onSearchSubmit","event","iziToast","hits","totalHits","galleryCards","SimpleLightbox","onLoadMoreClick","cardHeight"],"mappings":"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"}